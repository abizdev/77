import{s as L,a as f,g as v,b as w}from"./db-446b8b0e.js";import"./products-2e791d2d.js";const S="https://77-dev.uicgroup.tech/api/v1";document.querySelector("body");const b=document.querySelector(".login-btn"),q=document.querySelector(".log-user");document.querySelector(".modal");const a=document.querySelector(".modal-wrapper");document.querySelector(".modal-heading");const E=document.querySelector(".modal-close"),_=document.querySelector(".input-login input"),k=document.querySelector(".input-password input");function u(){a.classList.contains("hidden")?a.classList.remove("hidden"):a.classList.add("hidden")}b.addEventListener("click",o=>{u()});E.addEventListener("click",o=>{u()});q.addEventListener("click",()=>{if(_.value.length>=2&&k.value.length>=8){const o={phone_number:"+998911111111",password:"parol123"};fetch(`${S}/accounts/login/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(e=>{if(!e.access_token&&!e.refresh_token)return new Error("error");localStorage.setItem("access",JSON.stringify(e.access_token)),localStorage.setItem("refresh",JSON.stringify(e.refresh_token))}).catch(e=>{console.log("wooops error with data",e)}),u()}else alert("Данные не введены или мало данных")});const i=document.querySelector("body"),r=document.querySelector(".form-bg"),l=document.querySelector(".search-wrapper"),d=document.querySelector(".search-form"),T=document.querySelector(".search-form input"),c=document.querySelector(".sear-form__popup"),C=document.querySelector(".categories__content"),s=document.querySelector(".dropdown");let n=null,p=null;const m="https://77-dev.uicgroup.tech/api/v1",I=async()=>{try{n=await(await fetch(m+"/store/category/")).json(),n.forEach((e,t)=>{C.insertAdjacentHTML("beforeend",v(e,t))}),j()}catch(o){console.log("wooops erro in getting categories",o)}},M=async o=>{try{p=await(await fetch(m+`/store/sub-category/?parent__id=${o}`)).json(),console.log(p)}catch(e){console.log("wooops error in getting subcategories",e)}};l.addEventListener("click",o=>{o.stopPropagation(),T.focus(),console.log("wrapper cliked"),L.forEach(e=>{c.innerHTML+=f(e)}),d.classList.add("border-blue-500"),l.classList.replace("z-0","z-[60]"),c.classList.replace("hidden","flex"),r.classList.replace("opacity-0","opacity-100"),r.classList.replace("invisible","visible"),i.style.cssText="overflow: hidden;"});i.addEventListener("click",o=>{o.stopImmediatePropagation(),d.classList.add("remove"),d.classList.remove("border-blue-500"),c.classList.replace("flex","hidden"),l.classList.replace("z-[60]","z-0"),r.classList.replace("opacity-100","opacity-0"),r.classList.replace("visible","invisible"),c.innerHTML="",i.removeAttribute("style")});const A=(o,e="hidden")=>{o.classList.remove("hidden"),e&&o.classList.add(e)},g=(o,e="hidden")=>{e&&o.classList.remove(...e),o.classList.add("hidden")},P=(o,e)=>{const t=Math.floor(e/3)+2;s.style.gridRow=t,A(s,"dropdown-grid"),w(s,p)},j=()=>{const o=document.querySelectorAll(".categories__item");o.forEach((e,t)=>{e.addEventListener("click",()=>{const h=e.getAttribute("data-id");e.classList.contains("active")?(e.classList.remove("active"),s.innerHTML="",g(s,["dropdown-grid","dropdown-flex"])):(o.forEach(y=>{y.classList.remove("active"),s.innerHTML="",g(s,["dropdown-grid","dropdown-flex"])}),e.classList.toggle("active"),console.log(h),M(n[t].id),P(n[t],t))})})};I();
