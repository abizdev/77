import{s as f,a as w,g as v,b as S}from"./db-446b8b0e.js";import"./products-2e791d2d.js";const h="https://77-dev.uicgroup.tech/api/v1";document.querySelector("body");const b=document.querySelector(".login-btn"),q=document.querySelector(".log-user");document.querySelector(".modal");const i=document.querySelector(".modal-wrapper");document.querySelector(".modal-heading");const E=document.querySelector(".modal-close"),_=document.querySelector(".input-login input"),T=document.querySelector(".input-password input"),g=()=>{i.classList.contains("hidden")?i.classList.remove("hidden"):i.classList.add("hidden")},k=async e=>{const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};try{const s=await(await fetch(`${h}/accounts/login/`,o)).json();if(!s.access_token&&!s.refresh_token)return new Error("error");localStorage.setItem("access",s.access_token),localStorage.setItem("refresh",s.refresh_token),C(s.access_token)}catch(t){console.log("wooops error with data",t)}},C=async e=>{const o={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}};try{const s=await(await fetch(`${h}/accounts/me/`,o)).json();localStorage.user=JSON.stringify(s)}catch(t){console.log("woooops error in getting use info: ",t)}};b.addEventListener("click",e=>{g()});E.addEventListener("click",e=>{g()});q.addEventListener("click",()=>{_.value.length>=2&&T.value.length>=1?(k({phone_number:"+998911111111",password:"parol123"}),g()):alert("Данные не введены или мало данных")});const l=document.querySelector("body"),c=document.querySelector(".form-bg"),d=document.querySelector(".search-wrapper"),p=document.querySelector(".search-form"),I=document.querySelector(".search-form input"),n=document.querySelector(".sear-form__popup"),P=document.querySelector(".categories__content"),r=document.querySelector(".dropdown");let a=null,u=null;const y="https://77-dev.uicgroup.tech/api/v1",j=async()=>{try{a=await(await fetch(y+"/store/category/")).json(),a.forEach((o,t)=>{P.insertAdjacentHTML("beforeend",v(o,t))}),B()}catch(e){console.log("wooops erro in getting categories",e)}},A=async e=>{try{u=await(await fetch(y+`/store/sub-category/?parent__id=${e}`)).json(),console.log(u)}catch(o){console.log("wooops error in getting subcategories",o)}};d.addEventListener("click",e=>{e.stopPropagation(),I.focus(),console.log("wrapper cliked"),f.forEach(o=>{n.innerHTML+=w(o)}),p.classList.add("border-blue-500"),d.classList.replace("z-0","z-[60]"),n.classList.replace("hidden","flex"),c.classList.replace("opacity-0","opacity-100"),c.classList.replace("invisible","visible"),l.style.cssText="overflow: hidden;"});l.addEventListener("click",e=>{e.stopImmediatePropagation(),p.classList.add("remove"),p.classList.remove("border-blue-500"),n.classList.replace("flex","hidden"),d.classList.replace("z-[60]","z-0"),c.classList.replace("opacity-100","opacity-0"),c.classList.replace("visible","invisible"),n.innerHTML="",l.removeAttribute("style")});const M=(e,o="hidden")=>{e.classList.remove("hidden"),o&&e.classList.add(o)},m=(e,o="hidden")=>{o&&e.classList.remove(...o),e.classList.add("hidden")},O=(e,o)=>{const t=Math.floor(o/3)+2;r.style.gridRow=t,M(r,"dropdown-grid"),S(r,u)},B=()=>{const e=document.querySelectorAll(".categories__item");e.forEach((o,t)=>{o.addEventListener("click",()=>{const s=o.getAttribute("data-id");o.classList.contains("active")?(o.classList.remove("active"),r.innerHTML="",m(r,["dropdown-grid","dropdown-flex"])):(e.forEach(L=>{L.classList.remove("active"),r.innerHTML="",m(r,["dropdown-grid","dropdown-flex"])}),o.classList.toggle("active"),console.log(s),A(a[t].id),O(a[t],t))})})};j();
